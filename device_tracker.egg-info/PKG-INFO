Metadata-Version: 2.4
Name: device-tracker
Version: 0.1.0
Summary: Cross-platform device tracking system with server, agent, and CLI.
Author-email: Captain K <example@example.com>
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: fastapi==0.123.0
Requires-Dist: uvicorn[standard]==0.38.0
Requires-Dist: pydantic==2.12.5
Requires-Dist: pydantic-settings==2.6.0
Requires-Dist: python-dotenv
Requires-Dist: requests==2.32.5
Requires-Dist: httpx==0.28.1
Requires-Dist: rich==14.2.0
Requires-Dist: sqlalchemy==2.0.44
Requires-Dist: alembic
Requires-Dist: psycopg2-binary==2.9.10
Requires-Dist: redis
Requires-Dist: cryptography==46.0.3
Requires-Dist: passlib[bcrypt]==1.7.4
Requires-Dist: python-jose[cryptography]==3.3.0
Requires-Dist: typing-extensions
Requires-Dist: python-multipart
Requires-Dist: aiofiles
Requires-Dist: toml==0.10.2
Requires-Dist: typer==0.20.0
Requires-Dist: email-validator
Requires-Dist: psutil
Requires-Dist: platformdirs
Requires-Dist: click
Requires-Dist: ipaddress
Provides-Extra: dev
Requires-Dist: pytest==9.0.1; extra == "dev"
Requires-Dist: pytest-asyncio; extra == "dev"
Requires-Dist: pytest-cov; extra == "dev"
Requires-Dist: black; extra == "dev"
Requires-Dist: isort; extra == "dev"
Requires-Dist: mypy; extra == "dev"
Dynamic: license-file

# Tracker - Consent-Based Device Tracking System

A Python command-line device tracking system that allows consenting device owners to enroll and monitor their devices (laptops, desktops, Termux Android) with telemetry collection, lost device marking, and evidence generation capabilities.

## ⚠️ Important Disclaimers

**PLEASE READ BEFORE USING:**

- **This system can ONLY track devices that YOU own and have explicitly enrolled**
- **You CANNOT track arbitrary phone numbers or devices you don't own**
- **This is NOT a replacement for carrier-level tracking or vendor "Find My" capabilities**
- **You MUST comply with all local laws and regulations**
- **Unauthorized surveillance or tracking is ILLEGAL**
- **By using this system, you accept full responsibility for its lawful use**

## Features

- **Consent-based enrollment** - Devices must be explicitly enrolled with owner consent
- **Cross-platform support** - Linux, Windows, macOS, and Termux Android
- **Telemetry collection** - WiFi networks, IP location, battery level, system info
- **Lost device mode** - Mark devices as lost and send commands
- **Command execution** - Show messages, play sounds, lock screen
- **Offline capability** - Local queue for telemetry when offline
- **Security-first** - TLS encryption, ed25519 signatures, secure key storage
- **Privacy-aware** - Clear consent prompts, data minimization, audit logging

## System Architecture

```
┌─────────────┐         ┌─────────────┐         ┌─────────────┐
│ trackerctl  │◄────────► tracker-server ◄────────► tracker-agent │
│   (CLI)     │  HTTPS  │   (REST API)  │  HTTPS  │   (Device)   │
└─────────────┘         └─────────────┘         └─────────────┘
```

## Quick Start

### Installation

```bash
# Install from PyPI (when published)
pip install tracker-system

# Or install from source
git clone https://github.com/example/tracker.git
cd tracker
pip install -e .
```

### 1. Start the Server (Optional for testing)

```bash
# For production, deploy on a proper server with TLS
tracker-server --host 0.0.0.0 --port 8000
```

### 2. Create Admin Account

```bash
trackerctl auth register --email admin@example.com --password <password>
trackerctl login --server https://tracker.example.com
```

### 3. Enroll a Device

On the admin machine:
```bash
# Generate enrollment token (valid for 10 minutes)
trackerctl device generate-enroll-token --expires 10m
# Output: ABCD-1234-EFGH-5678
```

On the device to track:
```bash
# Install agent
pip install tracker-system

# Enroll device (requires consent)
tracker-agent enroll \
  --server https://tracker.example.com \
  --token ABCD-1234-EFGH-5678 \
  --display-name "John's Laptop"

# Start agent
tracker-agent run

# Or install as service (auto-start)
tracker-agent service install
```

### 4. Monitor Devices

```bash
# List all devices
trackerctl device list

# Show device details
trackerctl device show <device-id>

# Mark device as lost
trackerctl device lost <device-id> --message "If found, call 555-0123"

# Mark device as found
trackerctl device found <device-id>

# Generate tracking report
trackerctl report export <device-id> --from 2025-01-01 --to 2025-01-31 -o report.json
```

## Commands Available in Lost Mode

When a device is marked as lost, the following commands are automatically sent:

- **SHOW_MESSAGE** - Display a message on the device screen
- **PLAY_CHIME** - Play an audible alert sound
- **INCREASE_HEARTBEAT** - Increase telemetry frequency to 30 seconds
- **LOCK_SCREEN** - Lock the device screen (requires privileges)
- **PING** - Request immediate telemetry update

## Data Collected

The agent collects the following telemetry:

- Device hostname and OS information
- WiFi networks in range (SSID, BSSID, signal strength)
- IP address and approximate geographic location
- Battery level (if available)
- Timestamp and sequence number

## Security Features

- **TLS Required** - All communication encrypted with TLS
- **Ed25519 Signatures** - Device telemetry cryptographically signed
- **Secure Storage** - Keys stored with restrictive file permissions (600)
- **Token Rotation** - Device tokens can be revoked and rotated
- **Audit Logging** - All enrollments and commands logged
- **Rate Limiting** - Protection against telemetry flooding

## Privacy Considerations

- **Explicit Consent** - Clear consent prompt during enrollment
- **Data Minimization** - Only necessary data collected
- **Owner Control** - Only device owners can access their data
- **Local Storage** - Option to run completely offline
- **Transparent Operation** - All collected data types disclosed

## Deployment

### Production Server Setup

1. **Server Requirements**
   - Ubuntu 22.04 or similar
   - PostgreSQL database
   - TLS certificate (Let's Encrypt recommended)
   - Python 3.9+

2. **Install Dependencies**
```bash
sudo apt update
sudo apt install python3-pip postgresql nginx certbot
```

3. **Configure Database**
```bash
sudo -u postgres createdb tracker
sudo -u postgres createuser tracker_user
```

4. **Configure Environment**
```bash
# /etc/tracker/.env
TRACKER_DB_URL=postgresql://tracker_user:password@localhost/tracker
TRACKER_JWT_SECRET=<generate-strong-secret>
TRACKER_SERVER_HOST=0.0.0.0
TRACKER_SERVER_PORT=8000
```

5. **Run with Systemd**
```bash
# /etc/systemd/system/tracker-server.service
[Unit]
Description=Tracker Server
After=network.target postgresql.service

[Service]
Type=simple
User=tracker
WorkingDirectory=/opt/tracker
Environment="PATH=/opt/tracker/venv/bin"
ExecStart=/opt/tracker/venv/bin/tracker-server
Restart=always

[Install]
WantedBy=multi-user.target
```

6. **Configure Nginx with TLS**
```nginx
server {
    listen 443 ssl http2;
    server_name tracker.example.com;
    
    ssl_certificate /etc/letsencrypt/live/tracker.example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/tracker.example.com/privkey.pem;
    
    location / {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## Development

### Running Tests
```bash
# Install dev dependencies
pip install -e ".[dev]"

# Run tests
pytest

# Run with coverage
pytest --cov

# Run linters
ruff check .
mypy .
```

### Project Structure
```
tracker/
├── apps/
│   ├── trackerctl/      # Admin CLI
│   ├── tracker_agent/    # Device agent
│   └── tracker_server/   # REST API server
├── libs/
│   └── core/            # Shared libraries
├── tests/               # Test suite
├── docs/                # Documentation
└── pyproject.toml       # Project configuration
```

## Troubleshooting

### Agent Issues

**Agent won't start:**
- Check if device is enrolled: `cat ~/.config/tracker/agent.toml`
- Verify server connectivity: `curl https://tracker.example.com/healthz`
- Check logs: `journalctl --user -u tracker-agent`

**WiFi scanning not working:**
- Linux: Ensure `nmcli` or `iwlist` is available
- May require sudo for some scanning methods
- Some systems require additional permissions

**Commands not executing:**
- Check agent has necessary permissions
- Some commands (lock screen) require elevated privileges
- Review agent logs for error details

### Server Issues

**Database connection failed:**
- Verify PostgreSQL is running
- Check database credentials in environment
- Ensure database exists and migrations ran

**TLS errors:**
- Verify certificate is valid and not expired
- Ensure certificate matches domain name
- Check firewall allows HTTPS (port 443)

## Legal Notice

This software is provided for legitimate device tracking purposes only. Users are responsible for:

1. Ensuring they have legal authority to track devices
2. Obtaining proper consent from device users
3. Complying with all applicable laws and regulations
4. Using the system ethically and responsibly

The developers assume no liability for misuse of this software.

## Contributing

Contributions are welcome! Please ensure:

1. All tests pass
2. Code follows project style guidelines
3. Security considerations are addressed
4. Privacy implications are considered
5. Documentation is updated

## License

MIT License - See LICENSE file for details

## Support

- Documentation: https://tracker.example.com/docs
- Issues: https://github.com/example/tracker/issues
- Security: security@example.com (PGP key available)

## Acknowledgments

- Built with FastAPI, SQLAlchemy, and Pydantic
- Cryptography provided by the cryptography library
- Inspired by ethical device management needs

---

**Remember:** This system is for tracking YOUR OWN devices only.
